@use "shared/utils";

@mixin button-vars($variant: "secondary", $size: "md") {
	background: var(--button--#{$variant}-bg);
	color: var(--button--#{$variant}-fg);
	border: var(--button--border-size) solid var(--button--#{$variant}-border);
	padding-block: var(--button--spacing-block-#{$size});

	&:hover {
		background: var(--button--#{$variant}-bg-hover);
		color: var(--button--#{$variant}-fg-hover);
		border-color: var(--button--#{$variant}-border-hover);
	}
}

/// Returns a string with the higher specificity than the
/// `.btnv6_white_transparent:not(.btn_disabled):not(:disabled):not(.btn_active):not(.active):hover > span`
/// selector that also uses !important, ty valve
///
/// @return {String} - String with the highest specificity.
@function button-web-selector($sel) {
	@return #{$sel}#{$sel}#{$sel}#{$sel}#{$sel}#{$sel}#{$sel};
}

@mixin button($variant: "secondary", $size: "md") {
	@include button-vars($variant, $size);

	transition: var(--transition);
	font: var(--gpText-BodyLarge);
	border-radius: var(--border-radius);
	gap: var(--spacing-xs);
	padding-inline: var(--button--spacing-inline);

	display: flex;
	align-items: center;
	justify-content: center;

	cursor: pointer;
}

@mixin checkbox($checked-selector, $disabled-selector) {
	--icon-name: icon("checkbox");
	--icon-size: 24px;

	@include utils.icon("name");

	appearance: none;
	color: var(--fg-dim);

	&:hover {
		background: var(--fg-main);
	}

	&#{$checked-selector} {
		--icon-name: icon("checkbox-checked");
	}

	&#{$disabled-selector} {
		background: var(--bg-hover);
	}
}

@mixin dropdown($variant: "secondary", $size: "md") {
	@include button($variant, $size);

	position: relative;

	&::after {
		content: "";

		@include utils.icon("arrow");

		right: var(--spacing-lg);
	}
}

/// @param {String} $w - Button width.
/// @param {String} $h [$w] - Button height.
/// @param {String} $child - Child element for the icon.
/// @param {String} $name [name] - Icon name found in `assets/icons`.
/// @param {Boolean} $remove [true] - Remove every child from `$child`?
@mixin icon-button($w, $h: $w, $child, $name: "name", $remove: true) {
	background-color: var(--bg-hl);
	border-radius: var(--border-radius);
	padding: 0;

	width: #{$w};
	height: #{$h};

	&:hover {
		background-color: var(--bg-hover);
	}

	#{$child} {
		@include utils.icon(#{$name}, #{$remove});
	}
}

@mixin progress-bar($inner) {
	background-color: var(--bg-hl);
	border-radius: 10px;
	padding: 2px;

	#{$inner} {
		background: none var(--color-primary);
		border-radius: 10px;

		height: 6px;
	}
}

@mixin radio($active) {
	transition: var(--transition);
	background-color: var(--bg-main-50);
	font: var(--gpText-HeadingSmall);
	padding: var(--spacing-md);

	&:hover {
		background-color: var(--bg-hover);
	}

	&:first-child {
		border-radius: var(--border-radius-large) var(--border-radius-large) 0 0;
	}

	&:last-child {
		border-radius: 0 0 var(--border-radius-large) var(--border-radius-large);
	}

	#{$active} {
		background-color: var(--color-primary);
		color: var(--bg-main);
	}
}

@mixin radio-container {
	display: flex;
	flex-direction: column;
}

@mixin radio-container-horizontal {
	flex-direction: row;

	& > * {
		text-align: center;

		flex: 1;
	}

	& > :first-child {
		border-radius: var(--border-radius-large) 0 0 var(--border-radius-large);
	}

	& > :last-child {
		border-radius: 0 var(--border-radius-large) var(--border-radius-large) 0;
	}
}

@mixin radio-description {
	opacity: 0.5;
	font: var(--gpText-BodyMedium);
	margin-block-start: var(--spacing-xs);
}

@mixin tabs-container {
	background-color: var(--bg-main);
	border-radius: var(--border-radius-large);
	gap: 5px;
	padding: 8px;

	display: flex;
}

@mixin tab($active-selector) {
	color: var(--fg-dim);
	font: var(--gpText-BodyLarge);
	border-radius: var(--border-radius);
	padding: 7px 20px;

	&:hover {
		background-color: var(--bg-hover);
	}

	&#{$active-selector} {
		background-color: var(--bg-hl);
		color: var(--fg-main);
	}
}

/// @param {"normal" | "search" | "transparent"} $variant
@mixin text-field($variant: "normal") {
	--placeholder-color: var(--text-field--#{$variant}-fg-placeholder);
	@if $variant == "search" {
		--icon-spacing: calc(var(--text-field--spacing-inline) + var(--icon-size));
	}

	background-color: var(--text-field--#{$variant}-bg);
	color: var(--fg-main);
	font: var(--gpText-BodyLarge);
	border: 1px solid var(--text-field--#{$variant}-border);
	border-radius: var(--border-radius);
	padding-block: var(--spacing-sm);
	padding-inline-start: var(--text-field--spacing-inline);
	padding-inline-end: calc(
		var(--text-field--spacing-inline) + var(--icon-spacing, 0px)
	);
}

@mixin toggle($checked-selector, $disabled-selector) {
	--swatch-bg: var(--toggle--swatch-bg);
	--swatch-pos: var(--toggle--switch-spacing) var(--toggle--swatch-pos);
	--switch-bg: var(--toggle--switch-bg);

	appearance: none;
	background-color: var(--switch-bg);
	border-radius: var(--toggle--swatch-size);

	position: relative;
	width: var(--toggle--switch-size);
	height: calc(var(--toggle--swatch-size) + var(--toggle--switch-spacing) * 2);

	&#{$checked-selector} {
		--swatch-bg: var(--toggle--swatch-bg-checked);
		--swatch-pos: var(--toggle--swatch-pos) var(--toggle--switch-spacing);
		--switch-bg: var(--toggle--switch-bg-checked);
	}

	&#{$disabled-selector} {
		opacity: 0.5;
	}

	&::before {
		content: "";

		position: absolute;
		inset-block: var(--toggle--switch-spacing);
		inset-inline: var(--swatch-pos);
		width: var(--toggle--swatch-size);
		height: var(--toggle--swatch-size);

		transition: var(--transition);
		background-color: var(--swatch-bg);
		border-radius: var(--toggle--swatch-size);
	}
}
