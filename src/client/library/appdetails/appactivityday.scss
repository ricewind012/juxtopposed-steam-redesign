@use "shared/utils";

// TODO: Maybe remove the images and unify non-featured events this way...

%-event {
	transition: var(--transition);
	background: none;
	border: none;
	box-shadow: none;
}

%-event-image {
	border-radius: var(--rounding-lg);

	&:hover {
		background-color: var(--color-bg-main-20);
	}
}

/// For whatever reason an extend doesn't work here...
@mixin -event-contents {
	&_TextColumn {
		gap: var(--spacing-xs);
	}

	&_Title {
		color: var(--color-fg-main);
		font: var(--text--body-large);
	}
}

#AppActivityDate {
	color: var(--color-primary);
	font: var(--text--body-large);
	letter-spacing: 0;
	border-block-end: var(--border-md) solid var(--color-secondary);
	text-transform: none;
	padding-block-end: 4px;
	margin-block-end: var(--spacing-sm);

	#Rule {
		display: none;
	}
}

#AppActivityDay {
	border: none;
	padding: 0;
	margin-block-end: var(--spacing-lg);

	& > :not(:first-child) > #Event,
	& > div > :not(:first-child) > #Event {
		margin-block-start: var(--spacing-lg);
	}
}

#Event {
	--steamavatar_size: var(--avatar--size-sm);

	#EventActorAvatar {
		width: unset;
		height: unset;
	}

	#EventHeadline {
		color: var(--color-fg-main);
		font: var(--text--body-medium);
		padding: 0;
		margin-block-end: var(--spacing-sm);

		#SpanEvent {
			margin-inline: var(--spacing-sm);
		}
	}
}

#EventBody {
	@extend %-event;

	background-color: var(--color-bg-main-20);
	border-radius: var(--rounding-lg);
	margin-inline-start: calc(var(--steamavatar_size) + var(--spacing-sm));

	#ActiveScreenshot {
		margin: var(--spacing-md);
	}

	#ActivityPublishedScreenshot {
		#CarouselThumb {
			opacity: 1;
			transform: none;
			background-color: transparent;
			border: var(--border-md) solid transparent;
			border-radius: var(--rounding-lg);
			margin-block-end: var(--spacing-xxs);
			margin-inline-end: var(--spacing-xxs);

			&#Active {
				border-color: var(--color-secondary);
			}
		}

		#CarouselThumbs {
			margin-block-start: var(--spacing-md);
		}

		#ImageWrapper {
			border-radius: var(--rounding-lg);
		}

		#ScreenshotCaption#HasCaption {
			background: var(--color-bg-main-50);
			backdrop-filter: blur(20px);
			border-radius: 0;
			border-end-start-radius: var(--rounding-lg);
			margin-block-end: 24px;
		}

		#TimeStamp {
			color: var(--color-fg-dim);
			font: var(--text--body-small);
			margin-block-start: var(--spacing-xs);
			margin-inline: 0;
		}
	}

	#ActivityAchievementUnlocked {
		padding: var(--spacing-md);
	}
}

#MediumImageContainer {
	margin-inline-end: var(--spacing-md);
}

#PartnerEventFeatured {
	@extend %-event;
	@extend %-event-image;

	margin: 0;
}

#PartnerEventFeaturedHeader {
	background: none;
	font: var(--text--body-large);
	letter-spacing: 0;
	text-transform: none;
	padding: 0;
	margin-block-end: var(--spacing-sm);

	height: var(--spacing-xxl);
}

#PartnerEventLargeUpdate {
	@extend %-event;
	@extend %-event-image;

	#ImageContainer {
		padding: 0;
		margin-inline-end: var(--spacing-sm);
	}

	#LeftSideMajorUpdateBar {
		display: none;
	}
}

#PartnerEventLargeImage,
#PartnerEventMediumImage {
	@include -event-contents;

	&_Container {
		background: none;
	}

	&_Contents {
		padding: 0;
	}

	&_Image {
		border-radius: var(--rounding-lg);
	}

	&_Summary {
		color: var(--color-fg-dim);
		font: var(--text--body-medium);
		text-shadow: none;
		padding: 0;
	}

	&_TextColumn {
		text-shadow: none;
	}
}

#PartnerEventLargeImage {
	&_Image#Blur {
		display: none;
	}

	&_TextColumn {
		padding: 0;
		margin: 0;

		display: flex;
		flex-direction: column;

		#PartnerEventType {
			text-shadow: none;
		}
	}

	&_Title {
		text-shadow: none;
	}
}

#PartnerEventMediumImage {
	@extend %-event;
}

#PartnerEventTextOnly {
	@extend %-event;
	@include -event-contents;

	background-color: var(--color-bg-hl);
	border-radius: var(--rounding-lg);
	border-inline-start: var(--rounding-lg) solid var(--color-secondary);

	&:hover {
		background-color: var(--color-bg-hover);
	}

	&_Container {
		gap: var(--spacing-xs);
		padding: var(--spacing-sm);
	}

	&_Icon {
		--icon--size-lg: 40px;

		margin: 0;

		width: var(--icon--size-lg);
		height: var(--icon--size-lg);

		svg {
			@include utils.icon("name", true, "lg");
		}
	}
}

#PartnerEventType {
	color: var(--color-fg-dim);
	font: var(--text--body-medium);
	text-transform: none;

	#DayPosted {
		all: unset;
	}
}
